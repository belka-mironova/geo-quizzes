{"ast":null,"code":"import _slicedToArray from\"/Users/belka/Desktop/React/geo-quizzes/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import SignUp from\"./Authorization/SignUp\";import Login from\"./Authorization/Login\";import Splash from\"./Splash/Splash\";import Header from\"./Header/Header\";import Footer from\"./Footer/Footer\";import Menu from\"./Menu/Menu\";import Profile from\"./Profile/Profile\";import InfoTooltip from\"./Authorization/InfoTooltip\";import ProtectedRoute from\"./ProtectedRoute\";import*as auth from\"../utils/auth.js\";import{Route,Routes,useNavigate,Navigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRegisterSuccess=_useState4[0],setRegisterInfo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),registerInfo=_useState6[0],openRegisterInfo=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),email=_useState8[0],setEmail=_useState8[1];useEffect(function(){tokenCheck();},[]);useEffect(function(){if(isLoggedIn){navigate(\"/games\");}},[isLoggedIn]);var tokenCheck=function tokenCheck(){var jwt=localStorage.getItem(\"jwt\");if(jwt){auth.checkToken(jwt).then(function(data){if(data){setIsLoggedIn(true);setEmail(data.data.email);}}).catch(function(err){console.error(err);});}};var handleLogin=function handleLogin(email,password){auth.authorize(email,password).then(function(res){if(res.token){localStorage.setItem(\"jwt\",res.token);}setEmail(email);setIsLoggedIn(true);navigate(\"/games\");}).catch(function(err){console.error(err);});};var handleRegister=function handleRegister(email,password){auth.register(password,email).then(function(data){setRegisterInfo(true);navigate(\"/login\");}).catch(function(err){setRegisterInfo(false);console.error(err);}).finally(function(){openRegisterInfo(true);});};var handleLogout=function handleLogout(){localStorage.removeItem(\"jwt\");setEmail(\"\");setIsLoggedIn(false);navigate(\"/\");};var closeAllPopups=function closeAllPopups(){openRegisterInfo(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{isloggedIn:isLoggedIn,handleLogout:handleLogout,email:email}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Splash,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sign-up\",element:/*#__PURE__*/_jsx(SignUp,{handleRegister:handleRegister})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{handleLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/games\",element:/*#__PURE__*/_jsxs(ProtectedRoute,{isLoggedIn:isLoggedIn,children:[\" \",/*#__PURE__*/_jsx(Menu,{}),\" \"]})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{email:email})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:isLoggedIn?/*#__PURE__*/_jsx(Navigate,{to:\"/games\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(InfoTooltip,{isCorrect:isRegisterSuccess,onClose:closeAllPopups,isOpen:registerInfo})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","SignUp","Login","Splash","Header","Footer","Menu","Profile","InfoTooltip","ProtectedRoute","auth","Route","Routes","useNavigate","Navigate","App","navigate","isLoggedIn","setIsLoggedIn","isRegisterSuccess","setRegisterInfo","registerInfo","openRegisterInfo","email","setEmail","tokenCheck","jwt","localStorage","getItem","checkToken","then","data","catch","err","console","error","handleLogin","password","authorize","res","token","setItem","handleRegister","register","finally","handleLogout","removeItem","closeAllPopups"],"sources":["/Users/belka/Desktop/React/geo-quizzes/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport SignUp from \"./Authorization/SignUp\";\nimport Login from \"./Authorization/Login\";\nimport Splash from \"./Splash/Splash\";\nimport Header from \"./Header/Header\";\nimport Footer from \"./Footer/Footer\";\nimport Menu from \"./Menu/Menu\";\nimport Profile from \"./Profile/Profile\";\nimport InfoTooltip from \"./Authorization/InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from \"../utils/auth.js\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\n\nfunction App() {\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterSuccess, setRegisterInfo] = useState(false);\n  const [registerInfo, openRegisterInfo] = useState(false);\n  const [email, setEmail] = useState(\"\");\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/games\");\n    }\n  }, [isLoggedIn]);\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          if (data) {\n            setIsLoggedIn(true);\n            setEmail(data.data.email);\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  };\n\n  const handleLogin = (email, password) => {\n    auth\n      .authorize(email, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem(\"jwt\", res.token);\n        }\n        setEmail(email);\n        setIsLoggedIn(true);\n        navigate(\"/games\");\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const handleRegister = (email, password) => {\n    auth\n      .register(password, email)\n      .then((data) => {\n        setRegisterInfo(true);\n        navigate(\"/login\");\n      })\n      .catch((err) => {\n        setRegisterInfo(false);\n        console.error(err);\n      })\n      .finally(() => {\n        openRegisterInfo(true);\n      });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    setIsLoggedIn(false);\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n\n    openRegisterInfo(false);\n\n  };\n\n  return (\n    <div>\n      <Header\n        isloggedIn={isLoggedIn}\n        handleLogout={handleLogout}\n        email={email}\n      />\n      <Routes>\n        <Route path=\"/\" element={<Splash />} />\n        <Route\n          path=\"/sign-up\"\n          element={<SignUp handleRegister={handleRegister} />}\n        />\n        <Route path=\"/login\" element={<Login handleLogin={handleLogin} />} />\n        <Route path=\"/games\" element={<ProtectedRoute isLoggedIn={isLoggedIn}> <Menu/> </ProtectedRoute>} />\n        <Route path=\"/profile\" element={<Profile email={email} />} />\n        <Route\n          path=\"*\"\n          element={\n            isLoggedIn ? <Navigate to=\"/games\" /> : <Navigate to=\"/\" />\n          }\n        />\n      </Routes>\n      <Footer />\n\n      <InfoTooltip\n        isCorrect={isRegisterSuccess}\n        onClose={closeAllPopups}\n        isOpen={registerInfo}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"4HAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,OAAP,KAAmB,wBAAnB,CACA,MAAOC,MAAP,KAAkB,uBAAlB,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,MAAOC,OAAP,KAAmB,iBAAnB,CACA,MAAOC,KAAP,KAAiB,aAAjB,CACA,MAAOC,QAAP,KAAoB,mBAApB,CACA,MAAOC,YAAP,KAAwB,6BAAxB,CACA,MAAOC,eAAP,KAA2B,kBAA3B,CACA,MAAO,GAAKC,KAAZ,KAAsB,kBAAtB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,WAAxB,CAAqCC,QAArC,KAAqD,kBAArD,C,wFAEA,QAASC,IAAT,EAAe,CACb,GAAMC,SAAQ,CAAGH,WAAW,EAA5B,CACA,cAAoCd,QAAQ,CAAC,KAAD,CAA5C,wCAAOkB,UAAP,eAAmBC,aAAnB,eACA,eAA6CnB,QAAQ,CAAC,KAAD,CAArD,yCAAOoB,iBAAP,eAA0BC,eAA1B,eACA,eAAyCrB,QAAQ,CAAC,KAAD,CAAjD,yCAAOsB,YAAP,eAAqBC,gBAArB,eACA,eAA0BvB,QAAQ,CAAC,EAAD,CAAlC,yCAAOwB,KAAP,eAAcC,QAAd,eAEAxB,SAAS,CAAC,UAAM,CACdyB,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAIAzB,SAAS,CAAC,UAAM,CACd,GAAIiB,UAAJ,CAAgB,CACdD,QAAQ,CAAC,QAAD,CAAR,CACD,CACF,CAJQ,CAIN,CAACC,UAAD,CAJM,CAAT,CAMA,GAAMQ,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvB,GAAMC,IAAG,CAAGC,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ,CACA,GAAIF,GAAJ,CAAS,CACPhB,IAAI,CACDmB,UADH,CACcH,GADd,EAEGI,IAFH,CAEQ,SAACC,IAAD,CAAU,CACd,GAAIA,IAAJ,CAAU,CACRb,aAAa,CAAC,IAAD,CAAb,CACAM,QAAQ,CAACO,IAAI,CAACA,IAAL,CAAUR,KAAX,CAAR,CACD,CACF,CAPH,EAQGS,KARH,CAQS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,KAAR,CAAcF,GAAd,EACD,CAVH,EAWD,CACF,CAfD,CAiBA,GAAMG,YAAW,CAAG,QAAdA,YAAc,CAACb,KAAD,CAAQc,QAAR,CAAqB,CACvC3B,IAAI,CACD4B,SADH,CACaf,KADb,CACoBc,QADpB,EAEGP,IAFH,CAEQ,SAACS,GAAD,CAAS,CACb,GAAIA,GAAG,CAACC,KAAR,CAAe,CACbb,YAAY,CAACc,OAAb,CAAqB,KAArB,CAA4BF,GAAG,CAACC,KAAhC,EACD,CACDhB,QAAQ,CAACD,KAAD,CAAR,CACAL,aAAa,CAAC,IAAD,CAAb,CACAF,QAAQ,CAAC,QAAD,CAAR,CACD,CATH,EAUGgB,KAVH,CAUS,SAACC,GAAD,CAAS,CACdC,OAAO,CAACC,KAAR,CAAcF,GAAd,EACD,CAZH,EAaD,CAdD,CAgBA,GAAMS,eAAc,CAAG,QAAjBA,eAAiB,CAACnB,KAAD,CAAQc,QAAR,CAAqB,CAC1C3B,IAAI,CACDiC,QADH,CACYN,QADZ,CACsBd,KADtB,EAEGO,IAFH,CAEQ,SAACC,IAAD,CAAU,CACdX,eAAe,CAAC,IAAD,CAAf,CACAJ,QAAQ,CAAC,QAAD,CAAR,CACD,CALH,EAMGgB,KANH,CAMS,SAACC,GAAD,CAAS,CACdb,eAAe,CAAC,KAAD,CAAf,CACAc,OAAO,CAACC,KAAR,CAAcF,GAAd,EACD,CATH,EAUGW,OAVH,CAUW,UAAM,CACbtB,gBAAgB,CAAC,IAAD,CAAhB,CACD,CAZH,EAaD,CAdD,CAgBA,GAAMuB,aAAY,CAAG,QAAfA,aAAe,EAAM,CACzBlB,YAAY,CAACmB,UAAb,CAAwB,KAAxB,EACAtB,QAAQ,CAAC,EAAD,CAAR,CACAN,aAAa,CAAC,KAAD,CAAb,CACAF,QAAQ,CAAC,GAAD,CAAR,CACD,CALD,CAOA,GAAM+B,eAAc,CAAG,QAAjBA,eAAiB,EAAM,CAE3BzB,gBAAgB,CAAC,KAAD,CAAhB,CAED,CAJD,CAMA,mBACE,oCACE,KAAC,MAAD,EACE,UAAU,CAAEL,UADd,CAEE,YAAY,CAAE4B,YAFhB,CAGE,KAAK,CAAEtB,KAHT,EADF,cAME,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,OAAO,cAAE,KAAC,MAAD,IAAzB,EADF,cAEE,KAAC,KAAD,EACE,IAAI,CAAC,UADP,CAEE,OAAO,cAAE,KAAC,MAAD,EAAQ,cAAc,CAAEmB,cAAxB,EAFX,EAFF,cAME,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,KAAC,KAAD,EAAO,WAAW,CAAEN,WAApB,EAA9B,EANF,cAOE,KAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,OAAO,cAAE,MAAC,cAAD,EAAgB,UAAU,CAAEnB,UAA5B,4BAAyC,KAAC,IAAD,IAAzC,OAA9B,EAPF,cAQE,KAAC,KAAD,EAAO,IAAI,CAAC,UAAZ,CAAuB,OAAO,cAAE,KAAC,OAAD,EAAS,KAAK,CAAEM,KAAhB,EAAhC,EARF,cASE,KAAC,KAAD,EACE,IAAI,CAAC,GADP,CAEE,OAAO,CACLN,UAAU,cAAG,KAAC,QAAD,EAAU,EAAE,CAAC,QAAb,EAAH,cAA8B,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAH5C,EATF,GANF,cAsBE,KAAC,MAAD,IAtBF,cAwBE,KAAC,WAAD,EACE,SAAS,CAAEE,iBADb,CAEE,OAAO,CAAE4B,cAFX,CAGE,MAAM,CAAE1B,YAHV,EAxBF,GADF,CAgCD,CAED,cAAeN,IAAf"},"metadata":{},"sourceType":"module"}