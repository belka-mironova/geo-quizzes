{"ast":null,"code":"var _jsxFileName = \"/Users/belka/Desktop/React/geo-quizzes/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport SignUp from \"./Authorization/SignUp\";\nimport Login from \"./Authorization/Login\";\nimport Splash from \"./Splash/Splash\";\nimport Header from \"./Header/Header\";\nimport Footer from \"./Footer/Footer\";\nimport Menu from \"./Menu/Menu\";\nimport About from \"./About/About\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterSuccess, setRegisterInfo] = useState(false);\n  const [registerInfo, openRegisterInfo] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/\");\n    }\n  }, [isLoggedIn]);\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n\n    if (jwt) {\n      auth.checkToken(jwt).then(data => {\n        if (data) {\n          setIsLoggedIn(true);\n          setEmail(data.data.email);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  };\n\n  const handleLogin = (email, password) => {\n    auth.authorize(email, password).then(res => {\n      if (res.token) {\n        localStorage.setItem(\"jwt\", res.token);\n      }\n\n      setEmail(email);\n      setIsLoggedIn(true);\n      navigate(\"/\");\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const handleRegister = (email, password) => {\n    auth.register(password, email).then(data => {\n      setRegisterInfo(true);\n      navigate(\"/sign-in\");\n    }).catch(err => {\n      setRegisterInfo(false);\n      console.error(err);\n    }).finally(() => {\n      openRegisterInfo(true);\n    });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    setIsLoggedIn(false);\n    navigate(\"/sign-in\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      isloggedIn: isLoggedIn,\n      handleLogout: handleLogout,\n      email: email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Splash, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/sign-up\",\n        element: /*#__PURE__*/_jsxDEV(SignUp, {\n          handleRegister: handleRegister\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {\n          handleLogin: handleLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/games\",\n        element: /*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/about\",\n        element: /*#__PURE__*/_jsxDEV(About, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/games\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/sign-in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"3Nt1GnxASjZ6XwxCgRSRDVBc91w=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","SignUp","Login","Splash","Header","Footer","Menu","About","Route","Routes","useNavigate","Navigate","App","navigate","isLoggedIn","setIsLoggedIn","isRegisterSuccess","setRegisterInfo","registerInfo","openRegisterInfo","email","setEmail","tokenCheck","jwt","localStorage","getItem","auth","checkToken","then","data","catch","err","console","error","handleLogin","password","authorize","res","token","setItem","handleRegister","register","finally","handleLogout","removeItem"],"sources":["/Users/belka/Desktop/React/geo-quizzes/src/components/App.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport SignUp from \"./Authorization/SignUp\";\nimport Login from \"./Authorization/Login\";\nimport Splash from \"./Splash/Splash\";\nimport Header from \"./Header/Header\";\nimport Footer from \"./Footer/Footer\";\nimport Menu from \"./Menu/Menu\";\nimport About from \"./About/About\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\n\nfunction App() {\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterSuccess, setRegisterInfo] = useState(false);\n  const [registerInfo, openRegisterInfo] = useState(false);\n  const [email, setEmail] = useState(\"\");\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/\");\n    }\n  }, [isLoggedIn]);\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          if (data) {\n            setIsLoggedIn(true);\n            setEmail(data.data.email);\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  };\n\n  const handleLogin = (email, password) => {\n    auth\n      .authorize(email, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem(\"jwt\", res.token);\n        }\n        setEmail(email);\n        setIsLoggedIn(true);\n        navigate(\"/\");\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const handleRegister = (email, password) => {\n    auth\n      .register(password, email)\n      .then((data) => {\n        setRegisterInfo(true);\n        navigate(\"/sign-in\");\n      })\n      .catch((err) => {\n        setRegisterInfo(false);\n        console.error(err);\n      })\n      .finally(() => {\n        openRegisterInfo(true);\n      });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    setIsLoggedIn(false);\n    navigate(\"/sign-in\");\n  };\n\n  return (\n    <div>\n      <Header\n        isloggedIn={isLoggedIn}\n        handleLogout={handleLogout}\n        email={email}\n      />\n      <Routes>\n        <Route path=\"/\" element={<Splash />} />\n        <Route\n          path=\"/sign-up\"\n          element={<SignUp handleRegister={handleRegister} />}\n        />\n        <Route path=\"/login\" element={<Login handleLogin={handleLogin} />} />\n        <Route path=\"/games\" element={<Menu />} />\n        <Route path=\"/about\" element={<About />} />\n        <Route\n          path=\"*\"\n          element={\n            isLoggedIn ? <Navigate to=\"/games\" /> : <Navigate to=\"/sign-in\" />\n          }\n        />\n      </Routes>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}