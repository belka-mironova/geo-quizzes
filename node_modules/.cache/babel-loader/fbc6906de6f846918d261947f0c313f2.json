{"ast":null,"code":"var _jsxFileName = \"/Users/belka/Desktop/React/geo-quizzes/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport SignUp from \"./Authorization/SignUp\";\nimport Login from \"./Authorization/Login\";\nimport Splash from \"./Splash/Splash\";\nimport Header from \"./Header/Header\";\nimport Footer from \"./Footer/Footer\";\nimport Menu from \"./Menu/Menu\";\nimport Profile from \"./Profile/Profile\";\nimport InfoTooltip from \"./Authorization/InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from \"../utils/auth.js\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterSuccess, setRegisterInfo] = useState(false);\n  const [registerInfo, openRegisterInfo] = useState(false);\n  const [email, setEmail] = useState(\"\");\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/games\");\n    }\n  }, [isLoggedIn]);\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n\n    if (jwt) {\n      auth.checkToken(jwt).then(data => {\n        if (data) {\n          setIsLoggedIn(true);\n          setEmail(data.data.email);\n        }\n      }).catch(err => {\n        console.error(err);\n      });\n    }\n  };\n\n  const handleLogin = (email, password) => {\n    auth.authorize(email, password).then(res => {\n      if (res.token) {\n        localStorage.setItem(\"jwt\", res.token);\n      }\n\n      setEmail(email);\n      setIsLoggedIn(true);\n      navigate(\"/games\");\n    }).catch(err => {\n      console.error(err);\n    });\n  };\n\n  const handleRegister = (email, password) => {\n    auth.register(password, email).then(data => {\n      setRegisterInfo(true);\n      navigate(\"/login\");\n    }).catch(err => {\n      setRegisterInfo(false);\n      console.error(err);\n    }).finally(() => {\n      openRegisterInfo(true);\n    });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    setIsLoggedIn(false);\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n    openRegisterInfo(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      isloggedIn: isLoggedIn,\n      handleLogout: handleLogout,\n      email: email\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Splash, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/sign-up\",\n        element: /*#__PURE__*/_jsxDEV(SignUp, {\n          handleRegister: handleRegister\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 20\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(Login, {\n          handleLogin: handleLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/games\",\n        element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n          isLoggedIn: isLoggedIn,\n          children: [\" \", /*#__PURE__*/_jsxDEV(Menu, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 80\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 39\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/profile\",\n        element: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: isLoggedIn ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/games\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 26\n        }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/sign-in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 53\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(InfoTooltip, {\n      isCorrect: isRegisterSuccess,\n      onClose: closeAllPopups,\n      isOpen: registerInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"3Nt1GnxASjZ6XwxCgRSRDVBc91w=\", false, function () {\n  return [useNavigate];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","SignUp","Login","Splash","Header","Footer","Menu","Profile","InfoTooltip","ProtectedRoute","auth","Route","Routes","useNavigate","Navigate","App","navigate","isLoggedIn","setIsLoggedIn","isRegisterSuccess","setRegisterInfo","registerInfo","openRegisterInfo","email","setEmail","tokenCheck","jwt","localStorage","getItem","checkToken","then","data","catch","err","console","error","handleLogin","password","authorize","res","token","setItem","handleRegister","register","finally","handleLogout","removeItem","closeAllPopups"],"sources":["/Users/belka/Desktop/React/geo-quizzes/src/components/App.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport SignUp from \"./Authorization/SignUp\";\nimport Login from \"./Authorization/Login\";\nimport Splash from \"./Splash/Splash\";\nimport Header from \"./Header/Header\";\nimport Footer from \"./Footer/Footer\";\nimport Menu from \"./Menu/Menu\";\nimport Profile from \"./Profile/Profile\";\nimport InfoTooltip from \"./Authorization/InfoTooltip\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport * as auth from \"../utils/auth.js\";\nimport { Route, Routes, useNavigate, Navigate } from \"react-router-dom\";\n\nfunction App() {\n  const navigate = useNavigate();\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [isRegisterSuccess, setRegisterInfo] = useState(false);\n  const [registerInfo, openRegisterInfo] = useState(false);\n  const [email, setEmail] = useState(\"\");\n\n  useEffect(() => {\n    tokenCheck();\n  }, []);\n\n  useEffect(() => {\n    if (isLoggedIn) {\n      navigate(\"/games\");\n    }\n  }, [isLoggedIn]);\n\n  const tokenCheck = () => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((data) => {\n          if (data) {\n            setIsLoggedIn(true);\n            setEmail(data.data.email);\n          }\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  };\n\n  const handleLogin = (email, password) => {\n    auth\n      .authorize(email, password)\n      .then((res) => {\n        if (res.token) {\n          localStorage.setItem(\"jwt\", res.token);\n        }\n        setEmail(email);\n        setIsLoggedIn(true);\n        navigate(\"/games\");\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n  };\n\n  const handleRegister = (email, password) => {\n    auth\n      .register(password, email)\n      .then((data) => {\n        setRegisterInfo(true);\n        navigate(\"/login\");\n      })\n      .catch((err) => {\n        setRegisterInfo(false);\n        console.error(err);\n      })\n      .finally(() => {\n        openRegisterInfo(true);\n      });\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    setIsLoggedIn(false);\n    navigate(\"/\");\n  };\n\n  const closeAllPopups = () => {\n\n    openRegisterInfo(false);\n\n  };\n\n  return (\n    <div>\n      <Header\n        isloggedIn={isLoggedIn}\n        handleLogout={handleLogout}\n        email={email}\n      />\n      <Routes>\n        <Route path=\"/\" element={<Splash />} />\n        <Route\n          path=\"/sign-up\"\n          element={<SignUp handleRegister={handleRegister} />}\n        />\n        <Route path=\"/login\" element={<Login handleLogin={handleLogin} />} />\n        <Route path=\"/games\" element={<ProtectedRoute isLoggedIn={isLoggedIn}> <Menu/> </ProtectedRoute>} />\n        <Route path=\"/profile\" element={<Profile />} />\n        <Route\n          path=\"*\"\n          element={\n            isLoggedIn ? <Navigate to=\"/games\" /> : <Navigate to=\"/sign-in\" />\n          }\n        />\n      </Routes>\n      <Footer />\n\n      <InfoTooltip\n        isCorrect={isRegisterSuccess}\n        onClose={closeAllPopups}\n        isOpen={registerInfo}\n      />\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}